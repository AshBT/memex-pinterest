{% extends "layout.html" %}
{% block content %}
<table id="" class="table table-striped" style="margin-top:50px;">
  <thead>
    <tr>
      <th>URL</th>
      <th>Interesting</th>
      <th>Host</th>
      <th>Score</th>
      <th>Crawl At</th>
      <th>Seed</th>
      <th>Title</th>
      <th>Screenshot</th>
    </tr>
  </thead>
  <tbody>
  {% for url_dic in urls %}
      <tr>
        <td>
	  <!--<span class="glyphicon glyphicon-screenshot"></span>-->
	  &nbsp;<a href="{{ url_dic["url"] }}">{{ url_dic["url"][:40] }}</a>
	</td>
	  <!--<span class="glyphicon glyphicon-ok-circle" style="cursor: pointer;" onlick="markInterest('true', '{{ url_dic["url"] }}');"></span>&nbsp;
	  <span class="glyphicon glyphicon-remove-circle" style="cursor: pointer; cursor: hand;" onlick="markInterest('false', '{{ url_dic["url"] }}');"></span>-->
        <td>
	    {% if "interest" in url_dic and url_dic["interest"] %}
	      <button class="btn btn-success" onclick="markInterest('true', '{{ url_dic["url"] }}');" disabled>yes</button>
	      <button class="btn btn-danger" onclick="markInterest('false', '{{ url_dic["url"] }}');">no</button>
	    {% elif "interest" in url_dic and not url_dic["interest"] %}
  	      <button class="btn btn-success" onclick="markInterest('true', '{{ url_dic["url"] }}');">yes</button>
	      <button class="btn btn-danger" onclick="markInterest('false', '{{ url_dic["url"] }}');" disabled>no</button>
	    {% else %}
	      <button class="btn btn-success" onclick="markInterest('true', '{{ url_dic["url"] }}');">yes</button>
	      <button class="btn btn-danger" onclick="markInterest('false', '{{ url_dic["url"] }}');">no</button>
	    {% endif %}

  	      <!--<p style="margin-top:4px;">Currently: {{ url_dic["interest"] }}</p>-->
	  <!--<div onclick="markInterest('true', '{{ url_dic["url"] }}');">ddddddddddddd</div>-->
	  <!--<span class="glyphicon glyphicon-screenshot"></span>-->
	</td>

	

	{% if "host" in url_dic and url_dic["host"] %}
          <td>{{ url_dic["host"] }}</td>
        {% else %}
          <td></td>
	{% endif %}

	{% if "score" in url_dic and url_dic["score"] %}
          <td>{{ url_dic["score"] }}</td>
        {% else %}
          <td></td>
	{% endif %}

	{% if "crawled_at" in url_dic and url_dic["crawled_at"] %}
          <td>{{ url_dic["crawled_at"] }}</td>
        {% else %}
          <td></td>
	{% endif %}

	{% if "is_seed" in url_dic and url_dic["is_seed"] %}
          <td>{{ url_dic["is_seed"] }}</td>
        {% else %}
          <td></td>
	{% endif %}

	{% if "title" in url_dic and url_dic["title"] %}
          <td>{{ url_dic["title"] }}</td>
        {% else %}
          <td></td>
	{% endif %}

	{% if "screenshot_path" in url_dic %}	  
	  {% set screenshot_path = url_dic["screenshot_path"] %}
          <td><img src="{{ url_for('static', filename=screenshot_path) }}"></img></td>
        {% else %}
          <td></td>
	{% endif %}

      </tr>
  {% endfor %}
  </tbody>
</table>

<script>
function markInterest(interest, url) {

  console.log("Marking interest");
  interest_url = "/mark-interest/" + interest + "?url=" + url;

  $.get(interest_url, function( status ) {
    console.log("Everything's good y'all, s'all good, s'all good interest");
    location.reload();
  });
}
</script>

{% endblock %}
